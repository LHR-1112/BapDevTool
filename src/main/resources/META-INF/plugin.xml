<idea-plugin>
    <id>com.bap.dev.BapDevPlugin</id>
    <name>BapDevPlugin</name>
    <version>1.0</version>
    <vendor email="2991747768@qq.com">LHR_1112</vendor>

    <resource-bundle>messages.PluginBundle</resource-bundle>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceImplementation="com.bap.dev.settings.BapSettingsState"/>

        <applicationConfigurable parentId="tools"
                                 instance="com.bap.dev.settings.BapSettingsConfigurable"
                                 id="com.bap.dev.settings.BapSettingsConfigurable"
                                 displayName="Bap Settings"/>

        <projectViewNodeDecorator implementation="com.bap.dev.ui.BapProjectDecorator"/>

        <notificationGroup id="Cloud Project Download"
                           displayType="BALLOON"
                           key="notification.group.cloud.download"/>

        <postStartupActivity implementation="com.bap.dev.activity.BapStartupActivity"/>

        <toolWindow id="Bap Changes"
                    secondary="false"
                    icon="AllIcons.Toolwindows.ToolWindowChanges"
                    anchor="left"
                    factoryClass="com.bap.dev.ui.BapToolWindowFactory"/>
    </extensions>

    <projectListeners>
        <listener class="com.bap.dev.listener.BapAutoRefreshListener"
                  topic="com.intellij.openapi.vfs.newvfs.BulkFileListener"/>
        <listener class="com.bap.dev.listener.BapModuleListener"
                  topic="com.intellij.openapi.project.ModuleListener"/>
    </projectListeners>

    <actions>
        <group id="BapDevelopmentGroup"
               text="Bap"
               description="Bap development tools"
               popup="true"
               icon="AllIcons.General.GearPlain">

            <action id="com.bap.dev.action.HelloWorldAction"
                    class="com.bap.dev.action.HelloWorldAction"
                    text="Hello World"
                    description="Hello world"/>

            <action id="com.bap.dev.action.ProjectDownloadAction"
                    class="com.bap.dev.action.ProjectDownloadAction"
                    text="Download Project"
                    description="Download from cloud warehouse"/>

            <separator/>

            <action id="com.bap.dev.action.OpenBapSettingsAction"
                    class="com.bap.dev.action.OpenBapSettingsAction"
                    text="Settings"
                    description="Open Bap settings"
                    icon="AllIcons.General.Settings"/>

            <add-to-group group-id="MainMenu" anchor="after" relative-to-action="HelpMenu"/>
        </group>


        <group id="BapContextGroup" text="BapTools" popup="true" icon="AllIcons.General.GearPlain">

            <action id="com.bap.dev.action.RefreshProjectAction"
                    class="com.bap.dev.action.RefreshProjectAction"
                    text="Refresh"
                    description="Refresh this module from cloud"
                    icon="AllIcons.Actions.Refresh"/>

            <action id="com.bap.dev.action.UpdateLibsAction"
                    class="com.bap.dev.action.UpdateLibsAction"
                    text="Update Libs"
                    description="Download and update dependency libraries"
                    icon="AllIcons.Nodes.PpLib"/>

            <separator/>

            <action id="com.bap.dev.action.CompareJavaCodeAction"
                    class="com.bap.dev.action.CompareJavaCodeAction"
                    text="Compared"
                    description="Compare local code with cloud version"
                    icon="AllIcons.Actions.Diff"/>

            <action id="com.bap.dev.action.UpdateJavaCodeAction"
                    class="com.bap.dev.action.UpdateJavaCodeAction"
                    text="Update"
                    description="Overwrite local file with cloud version"
                    icon="AllIcons.Actions.Download"/>

            <action id="com.bap.dev.action.CommitJavaCodeAction"
                    class="com.bap.dev.action.CommitJavaCodeAction"
                    text="Commit"
                    description="Upload local code to cloud"
                    icon="AllIcons.Actions.Upload"/>

            <separator/>

            <action id="com.bap.dev.action.CommitAllAction"
                    class="com.bap.dev.action.CommitAllAction"
                    text="Commit All"
                    description="Commit all changes in module"
                    icon="AllIcons.Actions.Commit"/>

            <action id="com.bap.dev.action.PublishProjectAction"
                    class="com.bap.dev.action.PublishProjectAction"
                    text="Publish"
                    description="Rebuild and export project"
                    icon="AllIcons.Actions.Execute"/>

            <separator/>

            <action id="com.bap.dev.action.OpenAdminToolAction"
                    class="com.bap.dev.action.OpenAdminToolAction"
                    text="Open Admin Tool"
                    description="Launch bap admin tool"
                    icon="AllIcons.General.Settings"/>

            <separator/>

            <action id="com.bap.dev.action.RelocateProjectAction"
                    class="com.bap.dev.action.RelocateProjectAction"
                    text="Relocate Project"
                    description="Change remote project mapping"
                    icon="AllIcons.Nodes.Project"/>

            <add-to-group group-id="ProjectViewPopupMenu" anchor="after" relative-to-action="WeighingNewGroup"/>
        </group>

    </actions>
</idea-plugin>